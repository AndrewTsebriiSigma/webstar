# WebStar V1 Backend Environment Variables

# Application Settings
APP_NAME=WebStar API
DEBUG=False
ENVIRONMENT=development  # development | staging | production
BASE_URL=http://localhost:8000

# Database
# For development: SQLite (default)
DATABASE_URL=sqlite:///./webstar.db

# For production: PostgreSQL
# DATABASE_URL=postgresql://user:password@host:port/database
# Example: postgresql://webstar_user:secure_password@db.example.com:5432/webstar_db

# JWT Authentication
# IMPORTANT: Generate a secure random key for production!
# You can generate one with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-secret-key-change-in-production-REQUIRED
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=480  # 8 hours
REFRESH_TOKEN_EXPIRE_DAYS=30

# CORS Settings
# For development: Allow all origins
CORS_ORIGINS=["http://localhost:3000", "http://127.0.0.1:3000"]

# For production: Specify exact domains
# CORS_ORIGINS=["https://webstar.app", "https://www.webstar.app"]

# Google OAuth (Optional)
# Get credentials from: https://console.cloud.google.com/
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:3000/auth/callback/google

# =============================================================================
# CLOUDFLARE R2 STORAGE (Recommended for Production)
# =============================================================================
# Cloudflare R2 is an S3-compatible object storage with FREE egress (bandwidth).
# If not configured, files will be stored locally in /uploads directory.
#
# Setup Steps:
# 1. Go to https://dash.cloudflare.com -> R2
# 2. Create a bucket (e.g., "webstar-uploads")
# 3. Enable public access on the bucket OR set up a custom domain
# 4. Go to "Manage R2 API Tokens" -> "Create API token"
# 5. Select "Object Read & Write" permission
# 6. Copy the Access Key ID and Secret Access Key
#
# Your Account ID is visible in the Cloudflare dashboard URL or sidebar

R2_ACCOUNT_ID=your-cloudflare-account-id
R2_ACCESS_KEY_ID=your-r2-access-key-id
R2_SECRET_ACCESS_KEY=your-r2-secret-access-key
R2_BUCKET_NAME=webstar-uploads
R2_PUBLIC_URL=https://pub-xxxxxxxxxx.r2.dev

# For custom domain (optional, recommended for production):
# R2_PUBLIC_URL=https://cdn.yourdomain.com

# =============================================================================
# LEGACY AWS S3 (Deprecated - Use R2 instead)
# =============================================================================
# These settings are kept for backwards compatibility but R2 is preferred.
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_REGION=us-east-1
# S3_BUCKET_NAME=webstar-uploads
S3_PRESIGNED_URL_EXPIRATION=3600  # 1 hour

# Pagination
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

# =============================================================================
# MEDIA COMPRESSION (FFmpeg)
# =============================================================================
# Automatic compression of uploaded media files before R2 storage.
# Significantly reduces storage costs while maintaining display quality.
# 
# Compression ratios:
# - Video: 70-85% reduction (H.264/AAC in MP4)
# - Images: 60-80% reduction (WebP or optimized JPEG)
# - Audio: 50-70% reduction (AAC in M4A)
# - PDF: No compression (kept as-is)
#
# Requirements: FFmpeg must be installed on the server
# (Automatically installed via build.sh on Render)

COMPRESSION_ENABLED=True

# Quality presets: "high", "standard", "low"
# - high: Best quality, larger files (for premium content)
# - standard: Balanced quality/size (recommended)
# - low: Smallest files, lower quality (for bandwidth-constrained users)
COMPRESSION_VIDEO_PRESET=standard
COMPRESSION_IMAGE_PRESET=standard
COMPRESSION_AUDIO_PRESET=standard

# Image output format: "webp" (best compression) or "jpeg" (max compatibility)
COMPRESSION_IMAGE_FORMAT=webp

# Email Configuration (Optional - for future features)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM_EMAIL=noreply@webstar.app
# SMTP_FROM_NAME=WebStar

# Logging (Optional)
# LOG_LEVEL=INFO  # DEBUG | INFO | WARNING | ERROR | CRITICAL
